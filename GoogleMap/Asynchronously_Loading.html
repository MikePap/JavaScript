<!DOCTYPE html>
<html lang="it">
<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="UTF-8">
<title>Asynchronously_Loading</title>

<style type="text/css">
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }

h1{ margin-left:31px; font-size:21px; color:#00F;}
h3{margin-left:10px; font-size:16px; color:#F00;}
p{margin:10px;}
.nota{color:orange;}
.codice{color:green;}

#map_canvas { position:relative; margin:20px; width:80%; height:70%;  }

</style>

<script type="text/javascript">
 
function initialize() 
{
	var myOptions = 
	{
		zoom: 8,
		center: new google.maps.LatLng(-34.397, 150.644),
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};

	var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

}

function loadScript() 
{
	var script = document.createElement('script');
	script.type = 'text/javascript';
	script.src = 'http://maps.googleapis.com/maps/api/js?sensor=false&' +
	'callback=initialize';
	document.body.appendChild(script);
}

//window.onload = loadScript;						// NOn funziona più e bisogna caricare la funzione daql tag <body>

</script>

</head>
<body>
	
<h1>Caricamento asincrono</h1>

<p>
Dopo aver creato la funzione <b>initialize()</b> che dovrebbe visualizzare la mappa si crea una funzione (nel nostro caso <b>loadScript</b>) che crea e attacca al documento un'elemento &lt;script&gt; di tipo <q>text/javascript</q> a cui si assegna  come attributo <q>src</q> la <b>Maps API</b> alla quale viene passata la funzione <q>initialize</q> creata. Infine utilizzando <b>window.onload</b> si richiama la funzione <q>loadScript</q>. In tal 
modo dopo che la pagina è stata caricata completamente viene caricata prima la <q>Maps API</q> e poi la funzione <q>initialize</q>
</p>

	<div id="map_canvas"></div>
















<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGdgU_LiffVIA7leAWvnyfy_DxUa90O-g&callback=initialize" async defer></script>


</body>
</html>

