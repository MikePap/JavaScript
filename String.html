<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<title>String </title>
<link rel="stylesheet" href="../baseLocali.css" type="text/css"/>

<style type="text/css"></style>

</head>

<body>


<h1> Stringhe </h1>

<h3>L'oggetto "String()" è parte degli oggetti di Javascript. Per creare un'istanza (oggetto) stringa: </h3>
<p class="codice">var testo = new String(stringa)</p>

<h2> Quoting</h2>

<p class="codice"> 
"You make 'me' sad." <br />
 'Holy "cranking" moses!' <br /> 
 "<a href=../Variabili/&quot;home/&quot;>Home</a>"
</p>

<h2>toString()</h2>
<p> Stringhe, numeri e boleani hanno tutti il metodo <q>toString()</q> per convertire il loro valore ad una stringa: <br />

<pre>
var bFound = false; 
<span class="azzurro">alert(bFound.toString());</span>			<span class="nota">// "false"</span> 
var iNum1 = 10;
var fNum2 = 10.0;
<span class="azzurro">alert(iNum1.toString());</span>			<span class="nota">// "10"</span>
<span class="azzurro">alert(fNum2.toString());</span>			<span class="nota">// "10"</span>
</pre>
</p>

<h2>toLocaleString()</h2>
<p>
Questo metodo restituisce una stringa rappresentativa del numero in base alla lingua a cui si fa riferimento.
Ciò diventa possibile quando si passano i valori per i due parametri opzionali: 
</p>
<pre>
numero.toLocaleString([locale [, opzioni]])
</pre>
<p>
Se non si passano valori notiamo	che il numero viene trasformato in base ad una rappresentazione locale 
del mio computer che è quella italiana
</p>
<pre>
const number = 12345.6789;
console.log(number.toLocaleString());				<span class='nota'>// 12.345,679 (default "it_IT")</span>
</pre>
<p>
Se invece gli cambiamo il parametro "locale" con un altra lingua per esempio quella statunitense
</p>
<pre>
const number = 12345.6789;
console.log(number.toLocaleString("en-US"));			<span class='nota'>// 12,345.679 </span>
</pre>
<p>
Vediamo altri esempi con l'aggiunta di valori per "opzioni", per esempio con l'opzione <em>currency</em>
</p>
<pre>
const number = 12345.6789;

console.log(
	number.toLocaleString('de-DE', {
		style: 'currency',
		currency: 'EUR',
	}),
);
<span class='nota'>// 12.345,68 €</span> 
console.log(
	number.toLocaleString('en-US', {
		style: 'currency',
		currency: 'USD',
	}),
);
<span class='nota'>// $12,345.68</span> 
</pre>
<p>
Interessante è anche l'opzione <em>unit</em>
</p>
<pre>
const number = 12345.6789;

console.log(
	number.toLocaleString('it-IT', {
		style: 'unit',
		unit: 'liter',
		unitDisplay: 'long',
	}),
);
<span class="nota">// 12.345,679 litri</span>

console.log(
  number.toLocaleString('en-US', {
    style: 'unit',
    unit: 'mile-per-hour',
  }),
);
<span class="nota">// 12,345.679 mph</span>
</pre>
<p>
Nell'esempio seguente è utilizzato l'opzione <em>percent</em>
</p>
<pre>
const number = 12345.6789;

console.log(
	number.toLocaleString('it-IT', {
		style: 'percent',
		minimumFractionDigits: 2,
	}),
);
<span class="nota">// 1.234.567,89%</span>
</pre>

<h2>  Built-in Methods ('chartAt', 'toUpperCase', 'toLowerCase')</h2>

<pre>
var stringa = "hello".charAt(0); 		<span class="nota">// h</span>	
var stringa = "hello".charAt(1); 		<span class="nota">// e</span>
var stringa =  "hello".toUpperCase(); 		<span class="nota">// HELLO</span>
var stringa =  "Hello".toLowerCase();		<span class="nota">// hello</span>
</pre>


<h2> Length Property </h2>
<pre>
"hello".length;				<span class="nota">// restituisce 5</span>
</pre>

<h2>charAt( )</h2>
<pre>
"hello".charAt(0);			<span class="nota">// restituisce h</span>
"hello".charAt(1);			<span class="nota">// restituisce e</span>
</pre>

<h2> Replace</h2>
<p>
<pre>
var testoIniziale = "questa stringa"; 
var vecchia = "questa";
var nuova = "questa è una "; 
var finale = testoIniziale.replace(vecchia, nuova);
<span class="azzurro">console.log(finale);					<span class="nota">// questa è una stringa </span>
</span>
<span class="grigio">mentre</span>
<span class="azzurro">
console.log("papa".replace("p", "m"));			<span class="nota">// mapa (rimpiazza soltanto la prima 'p')</span>
</span>
</pre>
</p>

<p>
Provare a digitare qualcosa nel campo &lt;input&gt; seguente. Una funzione applicata all'evento "blur" sul campo 
trasformerà il punto in virgola 	
</p>

<input type="text" id="inputttt" />


<h2>Paragonare stringhe -- localeCompare() </h2>
<dl>
	<dt>Il metodo <q>localeCompare()</q> permette di ordinare le stringhe. Può restituire uno dei seguenti tre valori:</dt>
	<dd><b>0</b> => se le stringhe messe a confronto sono uguali  </dd>
	<dd><b>1</b> => se la stringa oggetto viene, in ordine alfabetico, prima della stringa in argometo</dd>
	<dd><b>-1</b> => se le stringa oggetto viene, in ordine alfabetico, dopo la stringa in argomento</dd>
</dl>	


<h2>Concatenare le stringhe -- concat() </h2>
<p>Il metodo <q>concat</q> permette di unire delle stringhe </p>
<pre>
var myString1 = new String("Hello, ");
var myString2 = new String("World!");
var myConcatString = myString1.concat(myString2);		
console.log(myConcatString);				<span class="nota">// Hello World</span>
</pre>


<h2>indexOf -- lastIndexOf</h2>
<pre>
string.indexOf(string)
string.indexOf(string, num)
</pre>
<p>
Permettono di trovare l'indice e quindi la posizione della stringa (o anche una sola lettera) passata. La differenza fra i due metodi è che <q>indexOf</q> inizia la ricerca da sinistra mentre <q>lastIndexOf</q> da destra verso sinistra. Per esempio volendo cercare la posizione della lettera 'l' (elle) nella parola 'Hello' se si utilizza il metodo <q>indexOf('l')</q> sarà restituito "2" mentre con il metodo "lastIndexOf" sarà restitutito '3'. In pratica <q>lastIndexOf</q> cerca la posizione della 'l' che, fra le due esistenti, sta più a destra mentre <q>indexOf</q> cerca la posizione della prima 'l' da sinistra. Nel caso si dovesse cercare la posizione della 'e' daranno entrambi lo stesso risultato '1'. <br />
Nello specificare il secondo parametro("num") si indica la posizione da cui partire la ricerca. L'indice 0 indica la prima posizione. 
</p>
<pre>
console.log([1, 2, 3, 2, 1].indexOf(2));			<span class="nota">// 1 (il primo '2' che incontra da sinistra)</span>
console.log([1, 2, 3, 2, 4, 8, 2, 1].lastIndexOf(2));		<span class="nota">// 6 (l'ultimo '2' che incontra da sinistra o il primo che incontra da destra)</span>
</pre>
<pre>
var mia_stringa = "A ab abc abcd";
var stringaa = "abc";
var foundAtPosition;
foundAtPosition = mia_stringa.indexOf(stringaa, 0);	<span class="nota">si vuole ricercare la posizione partendo da '0' cioè dall'inizio'</span>
console.log('La stringa ' +stringaa+  ' sta in posizione ' +foundAtPosition );
<span class="nota">La stringa abc sta in posizione 5 </span>
</pre>


<h3>Esempio con l'utilizzo della finestra del prompt</h3>

<INPUT type="button" value="Clicca per inserire la tua email"  onClick="myFunction();"> 


<h2>link()</h2>
<p>
Il metodo <q>link()</q> converte la stringa a una istanza del tag. 
In pratica viene creato un link (collegamento) dalla stringa  impostando come atrtibuto l'URL passato 
</p>
<pre>
string.link(URL)

var scoprire_olio = new String("Scopri tutto sull'olio extravergine d'oliva");
document.write(scoprire_olio.link('http://www.abcoliodoliva.com'));
</pre>


<h2>slice()</h2>
<pre>
string.slice(num1, num2)
string.slice(num)
</pre>
<p>Il metodo <b>slice()</b> restituisce i 'caratteri' (in caso di stringa) o 'valori' (in caso di array) dalla posizione 'num1' (compresa) a 'num2' (esclusa). Il primo carattere è in posizione '0'. Se viene passato un solo parametro il metodo restituisce i valori dalla posizione indicata nell'argomento fino alla fine della stringa. Senza argomenti restituisce l'intera stringa o array. E' possibile dare un valore negativo a 'num2. <br />
<span class="nota"><b>slice</b> può essere usato sia con stringhe che con array </span> 
</p>
<pre>
var testo = "www.abcoliodoliva.com";
var arr = [0, 4 , 8, 7, 9];
<span class="azzurro">
console.log(testo.slice(4, 7));			<span class="nota">// abc (dalla posizione 4(compresa) alla 7(esclusa)) </span>			 
console.log( arr.slice(1,3) );			<span class="nota">// [4,8] (dalla posizione 1(compresa) alla 3 (esclusa)) </span>			
console.log( testo.slice(-3) );			<span class="nota">// com (restituisce tre lettere a partire dalla fine della stringa)</span>
</span>
</pre>


<h2>splice()</h2>
<p>
Il metodo <b>splice</b>, invece <span class="nota">può essere utilizzato solo con gli array</span>, e restituisce il numero dei valori indicati nel secondo argomento a partire dalla posizione indicata nel primo argomento
<pre>
var a = [4, 7, 12, 20, 31];
<span class="azzurro">
console.log(a.splice(1,3));			<span class="nota">// 7, 12, 20 (restituisce tre valori a partire dal secondo)</span>
</span>
</pre>
</p>

<h2>substr -- substring</h2>
<pre>
string.substring(num1, num2)
string.substring(num)
</pre>
<p>
Il metodo  <b>substring</b> restituisce i caratteri di una stringa partendo dalla posizione 'num1' fino a 'num2' (<b> uguale al metodo <q>slice()</b>). La prima posizione è lo zero(0).<br />
Se passato un solo argomento sarà restituita una stringa che va dalla posizione dell' argomento fino alla fine della stringa. Se non viene passato nessun argomento verrà restituita l'intera stringa 
</p>
<p>
Il metodo <b>substr</b>  restituisce il numero dei caratteri indicati nel secondo parametro a partire dalla posizione indicata nel primo parametro (uguale al metodo <q>splice</q>). <br />
E' anche possibile dare a 'num1' un valore negativo. <br />
<span class="nota">Entrambi i metodi possono essere utilizzati solo con le stringhe</span>
</p>
<pre>
<span class="scuro">Alcune differenze tra i due metodi </span>
var testo = "www.abcoliodoliva.com";
<span class="azzurro">
console.log(testo.substr(4, 7));		<span class="nota">// abcolio  (a partire dal quarto(compreso) ne prende 7) </span>
console.log(testo.substr(7, 4));		<span class="nota">// olio (a partire dal settimo(compreso) ne prende 4 </span>

console.log(testo.substring(4, 7));		<span class="nota">// abc  (a partire dal quarto(compreso) a finire al settimo(escluso)</span>
console.log(testo.substring(7, 4));		<span class="nota">// abc (in senso inverso, a partire dal settimo a finire al quarto) </span>

console.log(testo.slice(4, 7));			<span class="nota">// abc  (a partire dal quarto a finire al settimo (uguale a 'substring')) </span>
console.log(testo.slice(7, 4));			<span class="nota">// ATTENZIONE: non restituisce niente </span>
</span>
</pre>


<h2>split()</h2>
<p>Il metodo <q>split</q> divide la stringa in stringhe separate in base a una "regularExpression" o a un separatore. <br /> 
Il metodo restituisce un array contenente le stringhe separate. <br /> 
Se passato il secondo parametro si avranno soltanto il numero di stringhe appunto indicate nel secondo argomento. 
</p>
<pre>
string.split(separator, num)
string.split(separator)
string.split(regexpression, num)
string.split(regexpression)
</pre>
<pre>
var myStringa = new String("This is a test");
var mySeparator = " ";
var split_stringa = myStringa.split(mySeparator);
var split_due = myStringa.split(mySeparator, 2);			
console.log(split_due );				<span class="nota">// Array [ "This", "is" ]</span>

for(var i=0; i &lt; split_stringa.length; i++){
	console.log( '[' + i + ']: ' + split_stringa[i]  );
} 
<span class="nota">
// [0]: This
// [1]: is
// [2]: a
// [3]: test
</span>
</pre>

<h3>Funzione per rendere maiuscola la prima lettera di ogni parola</h3>
<pre>
<span class="grigio">Trasforma tutte le prime lettere di ogni parola in maiuscolo</span>
function maiuscola_laPrima(stringa){
	var stringa_iniziale = stringa	
	var words = stringa_iniziale.split(" ");
	var testoFinale = "";
	for(i=0; i &lt; words.length; i++){
		var word = words[i];
		var primaL = word.substr(0,1);				<span class="nota">** per ogni parola si individua la prima lettera</span>
		var primaL = primaL.toUpperCase();			<span class="nota">** e la si rende maiuscola </span>
		testoFinale += primaL;
		var resto = word.substr(1, (word.length -1));		<span class="nota">** si individuano tutte le altre lettere per ogni parola</span>
		testoFinale += resto + ' ';
	}  
	return testoFinale;
}//

console.log( maiuscola_laPrima("amore e odio") );			<span class="nota">// Amore E Odio </span>

<span class="grigio">Rispetto alla precedente se la parola è formata da un singolo carattere non viene trasformata in maiuscolo.</span>"
function maiuscola_laPrima2(stringa){
	var stringa_iniziale = stringa	
	var words = stringa_iniziale.split(" ");
	var testoFinale = "";
	for(i=0; i &lt; words.length; i++){
		var word = words[i];	
		if(word.length > 1){					<span class="nota">** solo se la parola ha più di un carattere</span>
			var primaL = word.substr(0,1);
			var primaL = primaL.toUpperCase();
			testoFinale += primaL;
			var resto = word.substr(1, (word.length -1));
			testoFinale += resto + ' ';
		}else{
			testoFinale += word + ' ';			<span class="nota">** altrimenti (se la parola è di una sola lettera) viene restituita così com'è </span>
		}  
	}
	return testoFinale;  
}//

console.log( maiuscola_laPrima2("amore e odio e passione ed gelosia") );	<span class="nota">Amore e Odio e Passione Ed Gelosia </span>
</pre>

<h1>Costanti</h1>
<p>
Le costanti possono essere create con la parola chiave <b>const</b> che deve essere sempre posta altrimenti viene scambiato per variabile globale. Può iniziare con una lettera, underscore(_) o segno del dollaro($) e può contenere caratteri alfabetici, numerici o underscore. <span class="nota">Non supportato in IE8</span>
</p>
<pre>
const prefix = '212';
</pre>
<p>
Una costante <b>non può essere inizializzata</b> ma gli si deve assegnare obbligatoriamente un valore:
</p>
<pre>
const foo;			<span class="nota">SyntaxError: missing = in const declaration</span>
</pre>
<p>
Una costante non può cambiare il suo valore nell'esecuzione dello script come <b>non può essere reimpostata</b>; quindi in altre parole <b>può essere soltanto letta</b>.
</p>
<pre>
const f = 5;
<span class="azzurro">console.log(f);</span>			<span class="nota">// restituisce 5</span>

const f = 6;
<span class="azzurro">console.log(f);</span>			<span class="nota">// restituisce ancora 5</span>
</pre>
<p>
Il seguente è un'esempio su altri modi corretti/sbagliati dell'uso delle costanti
</p>
<pre>
function getAreaOfCircle(radius) {
	if(radius) {
		const PI = 3.412;
		const R;			<span class="nota">// ERRORE: le costanti devono essere inizializzate (come sopra) </span>
		PI=22/7;			<span class="nota">// ERRORE: il valore della costante non può essere riassegnato</span>
		return PI * radius * radius;
	}
	console.log(PI);			<span class="nota">// ERRORE: la costante PI fa parte dello blocco if e rimane utilizzata solo per quello scopo</span>
	return 0;
}
<span class="azzurro">
console.log(getAreaOfCircle(10));
console.log(getAreaOfCircle());		</span>
</pre>
<p>
C'è però un eccezione, come nel caso seguente:
</p>
<pre>
const obj = {};
obj.prop = 123;
<span class="azzurro">
console.log(obj.prop);				<span class="nota">// 123</span>
</span>
</pre>
<p>
L'esempio considera il caso di una costante che è un oggetto; in questo caso se aggiungiamo valori alle sue proprietà non causa errore.  	
</p>

<br /><br /><br /><br /><br />



<script type="text/javascript">


// Replace
document.querySelector('#inputttt').addEventListener('blur', function(e){
	var immissione = this.value;				
//	var immissione = e.target.value;
	var punto = ".";
	var virgola = ",";	
	var finale = immissione.replace(punto,virgola);
	this.value = finale;
}, false);


// localeCompare() 
var oStringObject1 = new String("yellow ");
var oStringObject2 = new String("blue ");
//var oStringObject2 = new String("yellow ");		// 'le due stringhe sono uguali'
var test = oStringObject1.localeCompare(oStringObject2);
console.log('Compari', test);							// 1

// concat()
var myString1 = new String("Hello, ");
var myString2 = new String("World!");
var myConcatString = myString1.concat(myString2);			// "myString2" sarà messa dopo "myString21"
console.log(myConcatString);


// indexOf -- lastIndexOf
var mia_stringa = "A ab abc abcd";
var stringaa = "abc";
var foundAtPosition;
foundAtPosition = mia_stringa.indexOf(stringaa, 0);	// si vuole ricercare la posizione partendo da '0' cioè dall'inizio'
console.log('La stringa ' +stringaa+  'sta in posizione ' +foundAtPosition+  " nella stringa " +mia_stringa );

// finestra del prompt
function myFunction(){
	var email_add = window.prompt("What is your e-mail address?","");
	if(email_add.indexOf("@") == -1){
		window.alert("You need an '@' symbol in your address, please try again.");
	}
	if(email_add.indexOf(".") == -1){
		window.alert("You need a '.' symbol in your address, please try again.");
	}
	if(email_add.indexOf("it") == -1){
		window.alert("La tua email non è italiana");
	}
	if((email_add.indexOf("@") != -1) && (email_add.indexOf(".") != -1) ){
	document.write("Thanks!");
	}
}//

// split()

var myStringa = new String("This is a test");
var mySeparator = " ";
var split_stringa = myStringa.split(mySeparator);
var split_due = myStringa.split(mySeparator, 2);			
console.log(split_due );						// Array [ "This", "is" ]

for(var i=0; i<split_stringa.length; i++){
	console.log( '[' + i + ']: ' + split_stringa[i]  );
} 
// [0]: This
// [1]: is
// [2]: a
// [3]: test


// substr -- substring
var testo = "www.abcoliodoliva.com";
console.log(testo.substr(4, 7));					// a partire dal quarto ne prende 7 
console.log(testo.substr(7, 4));					// a partire dal settimo ne prende 4

console.log(testo.substring(4, 7));				// a partire dal quarto a finire al settimo	
console.log(testo.substring(7, 4));				// a partire dal settimo a finire al quarto

console.log(testo.slice(4, 7));					// a partire dal quarto a finire al settimo (uguale a 'substring')
console.log(testo.slice(7, 4));					// non restituisce niente

////////////////

function maiuscola_laPrima(stringa){
	var stringa_iniziale = stringa	
	var words = stringa_iniziale.split(" ");
	var testoFinale = "";
	for(i=0; i < words.length; i++){
		var word = words[i];
		var primaL = word.substr(0,1);
		var primaL = primaL.toUpperCase();
		testoFinale += primaL;
		var resto = word.substr(1, (word.length -1));
		testoFinale += resto + ' ';
	}  
	return testoFinale;
}//

function maiuscola_laPrima2(stringa){
	var stringa_iniziale = stringa	
	var words = stringa_iniziale.split(" ");
	var testoFinale = "";
	for(i=0; i < words.length; i++){
		var word = words[i];	
		if(word.length > 1){	
			var primaL = word.substr(0,1);
			var primaL = primaL.toUpperCase();
			testoFinale += primaL;
			var resto = word.substr(1, (word.length -1));
			testoFinale += resto + ' ';
		}else{
			testoFinale += word + ' ';
		}  
	}
	return testoFinale;  
}//


console.log( maiuscola_laPrima("amore e odio") );
console.log( maiuscola_laPrima2("amore e odio e passione ed gelosia") );


</script>



















</body>
</html>
