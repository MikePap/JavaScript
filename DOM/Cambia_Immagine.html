<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<title>cambia immagine</title>
<style type="text/css">
h1{ font-size:24px; font-weight:bold; color:rgb(50,50,250); }
h2{ font-size:18px; font-weight:bold; color:rgb(250,50,150);}
h3{ font-size:14px; font-weight:bold; color:rgb(200,20,20);}
dt{ color:#003399; margin-bottom:5px;}
dd{ color:#0066FF;}
tt, em{color:#6a9999}

.nota{ color:rgb(250,120,0);}
.codice{ color:rgb(30,120,30);}
.grassetto{font-weight:bold;}


#box_imm{ 
position:relative; margin:1em auto;  text-align:center; border:1px solid;
}
#box_imm img{ 
margin-right:0.2em;  cursor:pointer;
}		/* vale solo per le immagini di questo file */

#scuroUlivo{ 
position:fixed; top:0; left:0; width:100%; height:100%; background: rgb(0,0,0); background: rgba(0,0,0,0.8); display:none; z-index:10; 
}
#vis_imgUlivo{
margin:auto; position:fixed; top:0; left:0; right:0; bottom:0; 
width:auto; height:auto; text-align:center; background:tranparent; display:none; /*border:1px solid #FF0;*/ z-index:11;
/*animation: dissolvenza 2s; se la imposto qui non mi funziona con JavaScript */	
}

/* REGOLA ANIMAZIONE		*/
@keyframes dissolvenza{
from{opacity:0.1}
to{opacity:1}
}


#vis_imgUlivo img{
/*display:none;*/  
}
#btn_dx{
margin:auto; position:fixed; top:50%; bottom:auto; left:auto; right:0; 
padding:0.5em; color:#FF0; border:1px solid; z-index:12; background:rgba(0,0,0,0.2); cursor:pointer; display:none;
}
#btn_dx:hover{
color:rgb(100,255,50);
}
#btn_sx{
margin:auto; position:fixed; top:50%; bottom:auto; left:0; right:auto; 
padding:0.5em; color:#FF0; border:1px solid; z-index:12; background:rgba(0,0,0,0.2); cursor:pointer; display:none;
}
#btn_sx:hover{
color:rgb(100,255,50);
}
#chiudBox{
position:fixed; top:0; left:0; font-size:1.5em; padding:0.1em 0.4em; border:1px solid; color:#F00; background:rgba(255,255,255,0.4); cursor:pointer; font-weight:bold; display:none; z-index:12;
border-radius:5px; 
}
#chiudBox:hover{
color:rgb(100,255,50);
}

#prova{
width:500px; height:350px; border:1px solid; background:red;
}

</style>
<script type="text/javascript"  src="../allegati/core.js"></script>
<script type="text/javascript"  src="cambiaImmagine.js"></script>
</head>
<body>

<h1>Funzione Cambia Immagine</h1>

<p>
funzione che permette di visualizzare delle immagini caricandole da un file xml grazie ad <tt>ajax</tt>. Le immagini vengono dapprima caricate nell'elemento &lt;box&gt; e ridotte in miniatura grazie al parametro di riduzione <em>r</em>. Poi vengono visualizzate ingrandite nell'elemento <em>visualizzaImg</em>.
Si presuppone che gli elementi (tag) del file xml che contengono gli attributi di ogni immagine siano obbligatoriamente: &lt;srcImg&gt;, &lt;titolo&gt;, &lt;altImg&gt;, &lt;larghezza&gt;, &lt;altezza&gt;  e &lt;indice&gt;. <br />

Le immagini possono essere cambiate tramite dei pulsanti (freccette) di avanzamento e indietreggiamento o anche con le freccette della tastiera. 
</p>

<body>

				<div id="scuroUlivo"></div> 
				<div id="vis_imgUlivo"><img /></div> 
				<div id="chiudBox">&times;</div> 
				<div id="btn_dx"> >> </button> </div> 
				<div id="btn_sx"> << </div> 				


	<div id="box_imm" class="centrata"></div> 



<script type="text/javascript">

ScorriImgXML("../allegati/img_ulivo2.xml", "immagine", "#box_imm", "vis_imgUlivo", "scuroUlivo", "chiudBox", "btn_dx", "btn_sx", 5);

/*
function get_firstChild(n)
{
	var y = n.firstChild;				// qui si instanzia 'y' come primo figlio di 'n' 
	while (y.nodeType!=1)		// controlla se il 'tipo' non Ã¨ uno spazio vuoto o nuova linea (1 corrisponde al 'nodeType'  'Elemento')  
	{		
	  y = y.nextSibling;			// ... nel caso non fosse un elemento allora si instanzia 'y' come elemento fratello 
	}									
	return y;						// ... altrimenti restituisce il primo figlio di 'y'
} // "get_firstChild()"

function loadXMLDoc(dname)
{
	if (window.XMLHttpRequest)
	{
		xhttp=new XMLHttpRequest();
	}
	else
	{
		xhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xhttp.open("GET",dname,false);
	xhttp.send(null);
	return xhttp.responseXML;
} // 

var prova = document.getElementById('prova');
var immagine;
xmlDoc = loadXMLDoc("../allegati/img_ulivo2.xml");														// carica il file .xml 

		var immagine = xmlDoc.getElementsByTagName("immagine");							// l'elemento genitore che contiene ogni immagine									
		var src = immagine[0];
		src = get_firstChild(src);
//		var titolo = immagine[0].children[1];
//		var alt = immagine[0].children[2];
//		var larghezza = immagine[0].children[3];
//		var larghezza = larghezza.childNodes[0].nodeValue;
//		var altezza = immagine[0].children[4];
//		altezza = altezza.childNodes[0].nodeValue / r;
//		var indice = immagine[i].children[5];
		var imgUlivi = document.createElement("img");

		imgUlivi.setAttribute('src', src.childNodes[0].nodeValue);	
//		imgUlivi.setAttribute('title', titolo.childNodes[0].nodeValue);	
//		imgUlivi.setAttribute('alt', alt.childNodes[0].nodeValue);	
//		imgUlivi.setAttribute('width', larghezza);	
//		imgUlivi.setAttribute('height', altezza);	
//		imgUlivi.setAttribute('indice', indice.childNodes[0].nodeValue);	
		prova.appendChild(imgUlivi);
*/

</script>
























<!--
http://localhost/JavaScript/allegati/img_ulivo2.xml
-->




</body>
</html>
