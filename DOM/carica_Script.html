<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<title>Caricare script dinamicamente  </title>
<style type="text/css">
h1{ font-size:24px; font-weight:bold; color:rgb(50,50,250);}
h2{ font-size:18px; font-weight:bold; color:rgb(250,50,150);}
h3{ font-size:14px;  color:rgb(200,20,20);}

.nota{ color:rgb(250,120,0);}
.codice{ color:rgb(30,120,30);}
.grande{ font-size:36px; background:#00CC66; }
.esterno{ color:#0033CC; }

#divo{
width:200px; height:100px; background:red;
}

#divo2{
width:300px; height:100px; background:green;
}

#puls1, #puls2{
display:none;
}


</style>
</head>
<body>

<h1>Caricare script dinamicamente</h1>

<button id="pulsante">Mostra Pulsanti</button>
<br />
<br />


<div id="divo"></div> 

<br />

<button id="puls1">Elimina il rosso</button>
<br /><br />


<div id="divo2"></div> 
<br />
<button id="puls2">Elimina il verde</button>


<br />
<br />


<script type="text/javascript">
/*
var eliminaRosso = document.createElement("script");
eliminaRosso.src = "allegati/EliminaRosso.js";
document.body.appendChild(eliminaRosso);
*/
//document.body.removeChild(eliminaRosso);						// NON FUNZIONA 
//eliminaRosso.parentNode.removeChild(eliminaRosso);			// NON FUNZIONA 	

/*
function caricaJS(scriptJS){
	var codice = document.createElement("script");
	codice.src = scriptJS;
	codice.type = "text/javascript";
	document.body.appendChild(codice);
	return codice;
} // 
*/

//### Funzione con l'uso del "Document Fragment"	###
function caricaJS(scriptJS){
	var df = document.createDocumentFragment();			// viene creato un oggetto 'Document Fragment' 
	var codice = document.createElement("script");
	codice.type = "text/javascript";
	codice.src = scriptJS;
	df.appendChild(codice);	
	document.body.appendChild(df);
} // 

/////////
function caricaCSS(scriptCSS){
	var linkElem = document.createElement('link');
	linkElem.setAttribute('rel', 'stylesheet');
	linkElem.setAttribute('type', 'text/css');
//	linkElem.setAttribute('id', 'linkElement');
	linkElem.setAttribute('href', scriptCSS);
	document.head.appendChild(linkElem);

} // 



var pulsante = document.getElementById('pulsante');
pulsante.addEventListener('click', 
function(){
	var css = caricaCSS("../allegati/all_caricaCSS.css");				// carica file .css
	var puls1 = document.getElementById('puls1') 
	puls1.style.display = 'block';
	var codice = caricaJS("../allegati/EliminaRosso.js");	
	var puls2 = document.getElementById('puls2') 
	puls2.style.display = 'block';
	var codice2 = caricaJS("../allegati/EliminaVerde.js");

}, false);




//##### Caricare un file .js in modo asincrono ed inserirlo all'inizio del tag <head>  #####
function loadJS( src ){
	"use strict";
	var ref = window.document.getElementsByTagName( "script" )[ 0 ];
	var script = window.document.createElement( "script" );
	script.type = "text/javascript";
	script.src = src;
	ref.parentNode.insertBefore( script, ref );
	return script;
}




</script>




























</body>
</html>
